<!-- Defining Variables -->
<!-- Defining Variables -->
<!-- Defining Variables -->

<% sent_request_to_user = current_user.friend_requests_as_requestor.all.where(requestor_id: current_user.id).all.where(receiver_id: user.id).any? %>
<!-- sent to user: <%= sent_request_to_user %> -->
<!-- <br> -->

<% sent_request_id = current_user.friend_requests_as_requestor.all.where(requestor_id: current_user.id).all.where(receiver_id: user.id).first.id if sent_request_to_user %>
<!-- sent_request_id: <%= sent_request_id%> -->
<!-- <br> -->

<% sent_friend_request = FriendRequest.where(id: sent_request_id).first if sent_request_id %>
<!-- sent_friend_request: <%= sent_friend_request%> -->
<!-- <br> -->

<% received_request_from_user = current_user.friend_requests_as_receiver.all.where(requestor_id: user.id).all.where(receiver_id: current_user.id).any? %>
<!-- received_request_from_user: <%= received_request_from_user %> -->
<!-- <br> -->
<% received_request_id = current_user.friend_requests_as_receiver.all.where(requestor_id: user.id).all.where(receiver_id: current_user.id).first.id if received_request_from_user %>
<!-- received_request_id: <%= received_request_id%> -->
<!-- <br> -->
<% received_friend_request = FriendRequest.where(id: received_request_id).first if received_request_id %>
<!-- received_friend_request: <%= received_friend_request %> -->
<!-- <br> -->




<!-- Friend Request Info -->
<!-- Friend Request Info -->
<!-- Friend Request Info -->

<!-- <% if received_request_from_user %>
  <% received_request_id = current_user.friend_requests_as_receiver.all.where(requestor_id: user.id).all.where(receiver_id: current_user.id).first.id  %>
  <div class="">
  <p class="float-right px-2"> (current_user is receiver) </p>
  <p class="float-right px-2"> This User is requestor </p>
  <p class="float-right px-2"> Friend Request ID: <%= received_request_id %></p>
  <p class="float-right px-2"> (Partial) User ID: <%= user.id %></p>
  <p class="float-right px-2"> current_user ID: <%= current_user.id %></p>
  </div>
  <br>
<% end %>

<% if sent_request_to_user %>
  <% sent_request_id = current_user.friend_requests_as_requestor.all.where(requestor_id: current_user.id).all.where(receiver_id: user.id).first.id %>
  <div class="">
  <p class="float-right px-2"> (current_user is requestor) </p>
  <p class="float-right px-2"> This User is receiver </p>
  <p class="float-right px-2"> Friend Request ID: <%= sent_request_id %></p>
  <p class="float-right px-2"> (Partial) User ID: <%= user.id %></p>
  <p class="float-right px-2"> current_user ID: <%= current_user.id %></p>
  </div>
  <br>
<% end %> -->



<!-- User Partial -->
<!-- User Partial -->
<!-- User Partial -->

<div class="p-4 border-t-2 border-r-2 border-b-2 border-l-4 border-gray-200">

    <div class="text-2xl pb-2">
      <div class="px-3">
        <div class="row justify-content-between">
          <div class="-px-3 pt-2">
          <% if locale_to != "Users#show" %>
            <%= link_to "#{user.username}", user_path(user) %>
          <% else %>
            <%= user.username%>
          <% end %>
          </div>

<!-- Rendering Buttons -->
<!-- Rendering Buttons -->
<!-- Rendering Buttons -->
          <div class="-px-3">
            <% if user == current_user %>
                <span class="pt-3 text-sm text-gray-600"> (me)</span>

            <% elsif (sent_request_to_user == true) %>

                <span class="pt-3 text-sm text-gray-600">

                <%#= link_to "pending", friend_request_path(sent_friend_request) %>

                <%= render partial: "friend_requests/options_modal", locals: { friend_request: sent_friend_request, requestor_id: sent_friend_request.requestor_id, receiver_id: sent_friend_request.receiver_id} %>

                </span>

            <% elsif (received_request_from_user == true) %>

              <span class="pt-3 text-sm text-gray-600">

                <%= render partial: "friend_requests/options_modal", locals: { friend_request: received_friend_request, requestor_id: received_friend_request.requestor_id, receiver_id: received_friend_request.receiver_id} %>

              </span>

            <% else  %>

              <%= render :partial => "friend_requests/request_buttons/add_friend_button", locals: { user: user} %>

            <% end %>
          </div>




        </div>
      </div>
    </div>

    <div class="p-4 border-2 border-gray-200">
      <div>  <span class="font-medium "> <%= user.name %> Info: </span> </div>
      <div> email: <%= user.email %> </div>
      <div> username: <%= user.username %> </div>
      <div> phone_number: <%= user.phone_number %> </div>
    </div>

    <% if received_request_from_user %>
      <div class=" p-4 ">
        <div class="row p-4 border-2 border-gray-200 text-center">
          <div class="font-medium pr-2 ">Received Friend Request Info: </div>
          <div class="pl-2"> Friend Request ID: <%= received_request_id %> </div>
          <div class="pl-2"> (Partial) User ID: <%= user.id %> </div>
          <div class="pl-2"> current_user ID: <%= current_user.id %> </div>

          <br> <br>
          <div class="pl-2"> <%= received_friend_request.inspect %> </div>

        </div>
      </div>
      <br>
    <% end %>

    <% if sent_request_to_user %>
      <div class=" p-4 ">
        <div class="row p-4 border-2 border-gray-200 text-center">
          <div class="font-medium pr-2">Sent Friend Request Info:</div>
          <div class="pl-2"> Friend Request ID: <%= sent_request_id %> </div>
          <div class="pl-2"> (Partial) User ID: <%= user.id %> </div>
          <div class="pl-2"> current_user ID: <%= current_user.id %> </div>

          <br>  <br>
          <div class="pl-2"> <%= sent_friend_request.inspect %> </div>

        </div>
      </div>
      <br>
    <% end %>

</div>

<br>
<br>
